{{response.title='Select'}}
{{extend 'layout.html'}}
<head>
    <script type="text/javascript" language="javascript" src="//code.jquery.com/jquery-1.12.3.js">
	</script>
    <script type="text/javascript" language="javascript" src="https://cdn.datatables.net/1.10.12/js/jquery.dataTables.min.js">
	</script>
    <script  type="text/javascript" src="https://cdn.datatables.net/select/1.2.0/js/dataTables.select.min.js">
    </script>
</head>
<body>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.12/css/jquery.dataTables.min.css">

    <table id="job_table" class="table table-striped hover display" cellspacing="0" width="100%">
        <thead>
             <tr>
                <th>ID</th>
                <th>Name </th>
                <th>Sim Mode</th>
                <th>Date</th>
                <th>Links</th>
            </tr>
        </thead>
    </table>
    {{include}}
</body>
<script type="text/javascript">
$(document).ready(function(){
    var job_table = $("#job_table").DataTable({
        select:false,
        data:  {{=job}},
        columns: [
            { data: 'id' },
            { data: 'job_name' },
            { data: 'simulator_mode' },
            { data: 'Date'}, 
            {width: '190px', "defaultContent": '<button class="btn-update" type="button">Update Page</button> <button class="btn-launch" type="button">Launch Page</button>'}
        ],
        order: [[3,'desc']]
    });
    //Button links to the ID of the row
    $('#job_table tbody').on( 'click', '.btn-update',  function (e) {
        var data = job_table.row( $(this).parents('tr') ).data();
        window.location = 'update/' +data['id'];
    } );
    $('#job_table tbody').on( 'click', '.btn-launch', function (e) {
        var data = job_table.row( $(this).parents('tr') ).data();
        window.location = 'launch/' +data['id'];
    } );
//    job_table.on('click','tr',function(){
//        var data = job_table.row(this).data();
//        window.location = 'update/' +data['id'];
//    });
});
</script>
