<head>
    <!-- Use correct character set. -->
    <meta charset="utf-8">
    <!-- Tell IE to use the latest, best version. -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- Make the application on mobile take up the full browser screen and disable user scaling. -->
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
    <title>Hello World!</title>
    <script src="{{=URL("static","cesium/Build/Cesium/Cesium.js")}}"></script>
    <style>
        @import url({{=URL("static","cesium/Build/Cesium/Widgets/widgets.css")}});
        html,body,#cesiumContainer {
            width:100%; height: 100%; margin: 0; padding: 0; overflow: hidden;
        }
        .toolbar-left{
            display:block;
            position:absolute;
            top:5px;
            left:5px;
        }
    </style>
    <style>
        @import url({{=URL("static","cesium/Apps/Sandcastle/templates/bucket.css")}});
    </style>
</head>
<body>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.12/css/jquery.dataTables.min.css">
    <div id="cesiumContainer" class="fullSize"></div>
    <div id="toolbar"></div>
    <div class="toolbar-left">
        <button onclick="alert('You clicked!');">Click me!</button>
        <button type="button" class="btn btn-default">
            Hello World
        </button>
    </div>
        <button>
            hello
        </button>
    </div>
        <script>
            var viewer = new Cesium.Viewer('cesiumContainer',{
                timeline : false,
                animation : false
            });
            //var dataSource = Cesium.GeoJsonDataSource.load('{{=URL('default', 'get_geojson')}}');
            var VSAT = new Cesium.GeoJsonDataSource();
            VSAT.load('{{=URL('lbController', 'get_geojson',args=[request.args(0)])}}').then(function(){
                var entities = VSAT.entities.values;
                for (var i = 0; i < entities.length; i++) {
                    var entity = entities[i];
                    entity.billboard = undefined;
                    entity.point = new Cesium.PointGraphics({
                        color: Cesium.Color.fromBytes((entity.properties.EIRP-290)*17.5,0,0,255),
                        pixelSize: 8,
                        scaleByDistance : Cesium.NearFarScalar(3.2e5, 90.0, 1.2e6, 0.01),
                    })
                };
            });
           var GW = new Cesium.GeoJsonDataSource();
           GW.load('{{=URL('lbController', 'get_geojson_gw',args=[request.args(0)])}}').then(function(){
                var entities = GW.entities.values;
                for (var i = 0; i < entities.length; i++) {
                    var entity = entities[i];
                    entity.billboard = new Cesium.BillboardGraphics({
                        image : '{{=URL("static","facility.gif")}}',
                    })
                };
            });
            viewer.dataSources.add(VSAT);
            viewer.dataSources.add(GW);
            viewer.zoomTo(VSAT);
        </script>
</body>
